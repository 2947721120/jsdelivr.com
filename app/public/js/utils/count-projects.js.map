{"version":3,"file":"count-projects.js","sources":["../src/public/js/utils/count-projects.js"],"sourcesContent":["import algolia from './algolia';\nimport has from './has';\n\nlet jsDelivrIndex = algolia.initIndex('jsDelivr');\n\nexport default function () {\n\treturn Promise.resolve().then(() => {\n\t\tlet hasLocalStorage = has.localStorage();\n\t\tlet now = Date.now();\n\n\t\tif (hasLocalStorage && localStorage.getItem('nbProjectsExpires') >= now) {\n\t\t\treturn localStorage.getItem('nbProjects');\n\t\t}\n\n\t\treturn jsDelivrIndex.search('', { analytics: false }).then((response) => {\n\t\t\tlet nbProjects = Math.floor(response.nbHits / 50) * 50;\n\n\t\t\tif (hasLocalStorage) {\n\t\t\t\tlocalStorage.setItem('nbProjects', nbProjects);\n\t\t\t\tlocalStorage.setItem('nbProjectsExpires', now + 604800000); // Cache for one week.\n\t\t\t}\n\n\t\t\treturn nbProjects;\n\t\t});\n\t});\n}\n"],"names":[],"mappings":";;;;;;;;uBAAoB,WAAW;;;;mBACf,OAAO;;;;AAEvB,IAAI,aAAa,GAAG,qBAAQ,SAAS,CAAC,UAAU,CAAC,CAAC;;qBAEnC,YAAY;AAC1B,QAAO,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,YAAM;AACnC,MAAI,eAAe,GAAG,iBAAI,YAAY,EAAE,CAAC;AACzC,MAAI,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;;AAErB,MAAI,eAAe,IAAI,YAAY,CAAC,OAAO,CAAC,mBAAmB,CAAC,IAAI,GAAG,EAAE;AACxE,UAAO,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;GAC1C;;AAED,SAAO,aAAa,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ,EAAK;AACxE,OAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;;AAEvD,OAAI,eAAe,EAAE;AACpB,gBAAY,CAAC,OAAO,CAAC,YAAY,EAAE,UAAU,CAAC,CAAC;AAC/C,gBAAY,CAAC,OAAO,CAAC,mBAAmB,EAAE,GAAG,GAAG,SAAS,CAAC,CAAC;IAC3D;;AAED,UAAO,UAAU,CAAC;GAClB,CAAC,CAAC;EACH,CAAC,CAAC;CACH"}