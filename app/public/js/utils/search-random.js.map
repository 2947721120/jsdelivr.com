{"version":3,"file":"search-random.js","sources":["../src/public/js/utils/search-random.js"],"sourcesContent":["import countProjects from './count-projects.js';\nimport search from './search.js';\nimport has from './has.js';\n\nexport default function () {\n\treturn countProjects().then((nbProjects) => {\n\t\tvar hasLocalStorage = has.localStorage();\n\t\tvar now = Date.now();\n\n\t\tif (hasLocalStorage && localStorage.getItem('randomProjectsExpires') >= now) {\n\t\t\treturn JSON.parse(localStorage.getItem('randomProjects'));\n\t\t}\n\n\t\treturn search('', Math.floor(Math.random() * nbProjects / 10)).then((result) => {\n\t\t\tif (hasLocalStorage) {\n\t\t\t\tlocalStorage.setItem('randomProjects', JSON.stringify(result.response));\n\t\t\t\tlocalStorage.setItem('randomProjectsExpires', now + 604800000); // Cache for one week.\n\t\t\t}\n\n\t\t\treturn result.response;\n\t\t});\n\t});\n}\n"],"names":[],"mappings":";;;;;;;;+BAA0B,qBAAqB;;;;wBAC5B,aAAa;;;;qBAChB,UAAU;;;;qBAEX,YAAY;AAC1B,QAAO,mCAAe,CAAC,IAAI,CAAC,UAAC,UAAU,EAAK;AAC3C,MAAI,eAAe,GAAG,mBAAI,YAAY,EAAE,CAAC;AACzC,MAAI,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;;AAErB,MAAI,eAAe,IAAI,YAAY,CAAC,OAAO,CAAC,uBAAuB,CAAC,IAAI,GAAG,EAAE;AAC5E,UAAO,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;GAC1D;;AAED,SAAO,2BAAO,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,UAAU,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM,EAAK;AAC/E,OAAI,eAAe,EAAE;AACpB,gBAAY,CAAC,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;AACxE,gBAAY,CAAC,OAAO,CAAC,uBAAuB,EAAE,GAAG,GAAG,SAAS,CAAC,CAAC;IAC/D;;AAED,UAAO,MAAM,CAAC,QAAQ,CAAC;GACvB,CAAC,CAAC;EACH,CAAC,CAAC;CACH"}